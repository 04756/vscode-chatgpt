<h2 align="center"><img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/iconWhite.png" height="64"><br>Ask ChatGPT</h2>
<p align="center"><strong>ChatGPT conversations in Visual Studio Code</strong></p>

[![Badge for version for Visual Studio Code extension gencay.vscode-chatgpt](https://vsmarketplacebadges.dev/version/gencay.vscode-chatgpt.png)](https://marketplace.visualstudio.com/items?itemName=gencay.vscode-chatgpt)

## üì¢ December 25 Update

The extension is expected to work without any 403s or 429s since it will now use the browser behind the scenes to make the chatGPT requests. Please make sure that `autologin` setting is set to `true` (default is `true`) and you keep the `Chrome` browser open all the time after logging in. It'll be automatically minimized after successful login. You can then ask questions to ChatGPT via the extension as usual.

# üöÄüéâ Zero Configuration (Automated Authentication)

- Zero-Config Autologin lets the extension grab the required tokens automatically using `puppeteer`. The extension will use the browser behind the scenes, so you are not expected to receive 4xx errors while asking ChatGPT via extension unless there is OpenAI outages.

- **2 options to run ChatGPT assistant in your vs-code**:

  1. [**Recommended**] Autologin - Using browser network to ask questions to ChatGPT.

     ‚ùóPlease make sure that the Chrome browser remains open while sending prompts. Extension will use the background service of the logged-in browser to send requests. Find instructions here: [Autologin Setup](#autologin-setup)

     ü§ñ Provide email address and password in vs-code Settings if you'd like the extension to autofill those everytime you need a new browser.

  2. Manually login on a browser and grab required tokens for logging in. Described in [Manual Setup](#manual-setup). This option has problems due to using unofficial OpenAI API usage and rate-limiting.

# ChatGPT as your copilot to level up your developer experience

- ü§ñ Zero-Config. Automatically logs you in and grabs the required tokens on your behalf.
- ‚û°Ô∏è Export all your conversation history at once in Markdown format.
- üîÉ Option to clear and restart the conversation with ChatGPT.
- üçª Optimized for dialogue! Have a conversation with ChatGPT with follow-ups.
- üíØ Get help from ChatGPT within vs-code for implementing test cases, explaining it or finding bugs.
- üìù Create projects/files with one click using built-in actions in the conversation view.
- ‚ö° Built-in syntax highlighting for ChatGPT suggested code using the default code-font of your Visual Studio Code!
- üñºÔ∏è Icon is generated by dall-e-2.

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/chatgpt-gif.gif">

# Features

The extension comes with context menu commands, copy/move suggested code into editor with one-click, conversation window and customization options for OpenAI's ChatGPT prompts.

## ChatGPT conversation window in vs-code

### üÜï Export all your conversation history withs one click

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/export-convo.png">

---

### üçª Optimized for dialogue

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/conversation-mode-2.png">

---

### Edit and resend a previous prompt

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/edit-resend.png">

---

### Copy or insert the code ChatGPT is suggesting right into your editor.

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/code-actions.png">

---

### Ask free-form text questions that will be listed in the conversation window. The conversation is kept in cache until vs-code instance is closed.

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/rust.png">

---

# Use defaults or customize your code prompts

- `ChatGPT: Add Tests`: Write tests for you. Right click on a selected block of code, run command.
  - "default": "Implement tests for the following code",
  - "description": "The prompt prefix used for adding tests for the selected code"
- `ChatGPT: Find bugs`: Analyze and find bugs in your code. Right click on a selected block of code, run command.
  - "default": "Find problems with the following code",
  - "description": "The prompt prefix used for finding problems for the selected code"
- `ChatGPT: Optimize`: Add suggestions to your code to improve. Right click on a selected block of code, run command.
  - "default": "Optimize the following code",
  - "description": "The prompt prefix used for optimizing the selected code"
- `ChatGPT: Explain`: Explain the selected code. Right click on a selected block of code, run command.
  - "default": "Explain the following code",
  - "description": "The prompt prefix used for explaining the selected code"

## Other available commands

- `ChatGPT: Ask anything`: Free-form text questions within conversation window.
- `ChatGPT: Clear session`: Clears the current session. Useful in case of API errors.
- `ChatGPT: Clear conversation`: Clears the conversation window and resets the thread to start a new conversation with ChatGPT
- `ChatGPT: Export conversation`: Exports the whole conversation in Markdown for you to easily store and find the Q&A list.

## Customization settings

- Opt-in to use automation to authenticate OpenAI.
- You can configure the commands to use any prompts for the selected code!
- Opt-in to receive notification when ChatGPT sends you a message!

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/settings.png">

# Autologin Setup

This option will automatically log you in and it'll use the browser in the background for your prompts. **‚ùóPlease make sure to keep the Chrome browser page open while sending queries**

1. If you'd like to automatically fill email address and password, update the extension settings with those information.

2. Once you ask ChatGPT something, it'll open a `Chrome` window and will ask you to log in.

3. Login to OpenAI as usual and solve captchas when prompted.

4. Wait till the browser is minimized after successfully logging in. The `Chrome` page needs to remain open while sending queries.

NOTE: You don't need to configure Chrome executable path since the default path will be used for Chrome on your operating system.However, you have the option to override it in the settings

- Find your executable path if your configuration is different by going to this URL on your Chrome browser: `chrome://version/` -> `Executable Path`

- For reference here are the defaults:

  - Windows: `C:\Program Files\Google\Chrome\Application\chrome.exe`
  - MAC: `/Applications/Google Chrome.app/Contents/MacOS/Google Chrome`
  - Linux: `/usr/bin/google-chrome`

# Manual Setup

‚ÑπÔ∏è This method is no longer recommended since hard rate-limiting by OpenAI services. Please use the `AutoLogin` option with Zero-Configuration required.

1. Go to https://chat.openai.com and log in.
2. Open your browser's developer tools
   - Hit F12 to open the developer tools in most browsers
   - Alternatively, right click on the browser window and select `Inspect`
3. Go to `Application` -> `Cookies` -> `https://chat.openai.com`. You will need the following cookies:
   - `__Secure-next-auth.session-token`: The extension will use this to send prompts to ChatGPT
   - `cf_clearance`: CloudFlare clearance token. A security measure OpenAI put in place to block automated access.
4. Go to `Console` and type in the following code to get your `user-agent`
   - `navigator.userAgent`: This is your browser's user-agent, needed for CloudFlare clearance. Enter the value of `userAgent` when prompted by the extension. Copy its value **without single or double quotes**.
5. Now that you have all required session variables, run any command using the extension and you'll be asked to enter these values:
   - `__Secure-next-auth.session-token`: An encoded token starting with `ey***`
   - `cf_clearance`: An alpha-numeric token
   - `userAgent`

<img src="https://raw.githubusercontent.com/gencay/vscode-chatgpt/main/images/setup.png">

# Troubleshooting

- If the bot isn't responding, try clearing your cache by running the `ChatGPT: Clear session` command.
- It's possible that openai systems may experience issues responding to your queries due to high-traffic from time to time.
- If you get `ChatGPTAPI error 429`, it means that you are making Too Many Requests. Please wait and try again in a few moments. If it persists, restart your vs-code.
- If you see `ChatGPTAPI error terminated`, your requests are being throttled. Please try again later.

# Credits

- üíª Open AI ChatGPT: https://chat.openai.com/
- üñºÔ∏è Open AI Dall-E-2: https://openai.com/dall-e-2/
- üß™ This extension uses unofficial OpenAI APIs. https://github.com/transitive-bullshit/chatgpt-api
